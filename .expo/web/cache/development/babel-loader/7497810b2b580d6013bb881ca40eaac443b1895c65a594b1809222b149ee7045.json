{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _Stack = require(\"../../primitives/Stack\");\nvar _hooks = require(\"../../../hooks\");\nvar _FormControl = require(\"../FormControl\");\nvar _reactNative = require(\"react-native-web/dist/index\");\nvar _Context = require(\"./Context\");\nvar _theme = require(\"../../../theme\");\nvar _this = this,\n  _jsxFileName = \"/Users/himanshusatija/projects/nativebase-v3/src/components/composites/PinInput/PinInput.tsx\";\nvar PinInput = function PinInput(_ref, ref) {\n  var children = _ref.children,\n    props = (0, _objectWithoutProperties2.default)(_ref, [\"children\"]);\n  var _themeTools$extractIn = _theme.themeTools.extractInObject(props, ['p', 'px', 'py', 'pt', 'pb', 'pl', 'pr']),\n    _themeTools$extractIn2 = (0, _slicedToArray2.default)(_themeTools$extractIn, 2),\n    padding = _themeTools$extractIn2[0],\n    remProps = _themeTools$extractIn2[1];\n  var _useThemeProps = (0, _hooks.useThemeProps)('PinInput', remProps),\n    manageFocus = _useThemeProps.manageFocus,\n    defaultValue = _useThemeProps.defaultValue,\n    value = _useThemeProps.value,\n    space = _useThemeProps.space,\n    onChange = _useThemeProps.onChange,\n    newProps = (0, _objectWithoutProperties2.default)(_useThemeProps, [\"manageFocus\", \"defaultValue\", \"value\", \"space\", \"onChange\"]);\n  var formControlContext = (0, _FormControl.useFormControlContext)();\n  var RefList = [];\n  var setRefList = function setRefList(ref, index) {\n    RefList[index] = ref;\n  };\n  var _React$useState = _react.default.useState(value || defaultValue),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    pinInputValue = _React$useState2[0],\n    setPinInputValue = _React$useState2[1];\n  var handleChange = function handleChange(newValue, fieldIndex) {\n    var temp = pinInputValue && (0, _toConsumableArray2.default)(pinInputValue) || [];\n    temp[fieldIndex] = newValue;\n    value === undefined && setPinInputValue(temp.join(''));\n    onChange && onChange(temp.join(''));\n    if (newValue === '' && manageFocus && fieldIndex - 1 > -1) RefList[fieldIndex - 1].current.focus();else if (newValue && manageFocus && fieldIndex + 1 < RefList.length) RefList[fieldIndex + 1].current.focus();\n    return temp.join('');\n  };\n  var handleMultiValueChange = function handleMultiValueChange(newValue, fieldIndex) {\n    var pinFieldLength = RefList.length;\n    var newValueLength = newValue.length;\n    if (newValueLength >= pinFieldLength && newValueLength > 2) {\n      var splicedValue = newValue ? (0, _toConsumableArray2.default)(newValue) : [];\n      splicedValue.splice(pinFieldLength);\n      RefList[pinFieldLength - 1].current.focus();\n      setPinInputValue(splicedValue.join(''));\n      onChange && onChange(splicedValue.join(''));\n    }\n    if (_reactNative.Platform.OS !== 'ios') {\n      var temp = pinInputValue ? (0, _toConsumableArray2.default)(pinInputValue) : [];\n      if (newValue === '') {\n        temp = temp.filter(function (_n, i) {\n          return i !== fieldIndex;\n        });\n        if (manageFocus && fieldIndex - 1 > -1) RefList[fieldIndex - 1].current.focus();\n      } else {\n        temp[fieldIndex] = JSON.stringify(parseInt(newValue, 10) % 10);\n        if (manageFocus && fieldIndex + 1 < RefList.length) RefList[fieldIndex + 1].current.focus();\n      }\n      value === undefined && setPinInputValue(temp.join(''));\n      onChange && onChange(temp.join(''));\n    }\n  };\n  var indexSetter = function indexSetter(allChildren) {\n    var pinInputFiledCounter = -1;\n    return _react.default.Children.map(allChildren, function (child) {\n      pinInputFiledCounter++;\n      return _react.default.cloneElement(child, {\n        fieldIndex: pinInputFiledCounter\n      }, child.props.children);\n    });\n  };\n  _react.default.useEffect(function () {\n    if (value !== undefined && value != pinInputValue) setPinInputValue(value);\n  }, [value, pinInputValue, setPinInputValue]);\n  return _react.default.createElement(_Context.PinInputContext.Provider, {\n    value: (0, _extends2.default)({}, formControlContext, newProps, {\n      setRefList: setRefList,\n      handleChange: handleChange,\n      handleMultiValueChange: handleMultiValueChange,\n      value: pinInputValue\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, children && _react.default.createElement(_Stack.HStack, (0, _extends2.default)({\n    flexDirection: \"row\",\n    space: space\n  }, padding, {\n    ref: ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), indexSetter(children)));\n};\nvar _default = _react.default.memo(_react.default.forwardRef(PinInput));\nexports.default = _default;","map":{"version":3,"names":["_react","_interopRequireDefault","require","_Stack","_hooks","_FormControl","_reactNative","_Context","_theme","PinInput","_ref","ref","children","props","_objectWithoutProperties2","default","_themeTools$extractIn","themeTools","extractInObject","_themeTools$extractIn2","_slicedToArray2","padding","remProps","_useThemeProps","useThemeProps","manageFocus","defaultValue","value","space","onChange","newProps","formControlContext","useFormControlContext","RefList","setRefList","index","_React$useState","useState","_React$useState2","pinInputValue","setPinInputValue","handleChange","newValue","fieldIndex","temp","_toConsumableArray2","undefined","join","current","focus","length","handleMultiValueChange","pinFieldLength","newValueLength","splicedValue","splice","Platform","OS","filter","_n","i","JSON","stringify","parseInt","indexSetter","allChildren","pinInputFiledCounter","Children","map","child","cloneElement","useEffect","createElement","PinInputContext","Provider","_extends2","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","HStack","flexDirection","memo","forwardRef"],"sources":["E:\\Login-UI-UX-React-Native\\node_modules\\native-base\\lib\\commonjs\\components\\composites\\PinInput\\PinInput.tsx"],"sourcesContent":["import React from 'react';\nimport { HStack } from '../../primitives/Stack';\nimport { useThemeProps } from '../../../hooks';\nimport type { IPinInputProps } from './types';\nimport { useFormControlContext } from '../FormControl';\nimport { Platform } from 'react-native';\nimport { PinInputContext } from './Context';\nimport { themeTools } from '../../../theme';\n\nconst PinInput = ({ children, ...props }: IPinInputProps, ref?: any) => {\n  let [padding, remProps] = themeTools.extractInObject(props, [\n    'p',\n    'px',\n    'py',\n    'pt',\n    'pb',\n    'pl',\n    'pr',\n  ]);\n  const {\n    manageFocus,\n    defaultValue,\n    value,\n    space,\n    onChange,\n    ...newProps\n  } = useThemeProps('PinInput', remProps);\n  const formControlContext = useFormControlContext();\n\n  const RefList: Array<any> = [];\n  const setRefList = (ref: any, index: number) => {\n    RefList[index] = ref;\n  };\n  const [pinInputValue, setPinInputValue] = React.useState(\n    value || defaultValue\n  );\n  const handleChange = (newValue: string, fieldIndex: number) => {\n    let temp = (pinInputValue && [...pinInputValue]) || [];\n    temp[fieldIndex] = newValue;\n    value === undefined && setPinInputValue(temp.join(''));\n    onChange && onChange(temp.join(''));\n    if (newValue === '' && manageFocus && fieldIndex - 1 > -1)\n      RefList[fieldIndex - 1].current.focus();\n    else if (newValue && manageFocus && fieldIndex + 1 < RefList.length)\n      RefList[fieldIndex + 1].current.focus();\n    return temp.join('');\n  };\n  const handleMultiValueChange = (newValue: string, fieldIndex: number) => {\n    const pinFieldLength = RefList.length;\n    const newValueLength = newValue.length;\n    if (newValueLength >= pinFieldLength && newValueLength > 2) {\n      let splicedValue = newValue ? [...newValue] : [];\n      splicedValue.splice(pinFieldLength);\n      RefList[pinFieldLength - 1].current.focus();\n      setPinInputValue(splicedValue.join(''));\n      onChange && onChange(splicedValue.join(''));\n    }\n\n    if (Platform.OS !== 'ios') {\n      let temp = pinInputValue ? [...pinInputValue] : [];\n      if (newValue === '') {\n        // Handling Backward focus.\n        temp = temp.filter((_n, i) => i !== fieldIndex);\n        if (manageFocus && fieldIndex - 1 > -1)\n          RefList[fieldIndex - 1].current.focus();\n      } else {\n        temp[fieldIndex] = JSON.stringify(parseInt(newValue, 10) % 10);\n        if (manageFocus && fieldIndex + 1 < RefList.length)\n          RefList[fieldIndex + 1].current.focus();\n      }\n      value === undefined && setPinInputValue(temp.join(''));\n      onChange && onChange(temp.join(''));\n    }\n  };\n\n  const indexSetter = (allChildren: JSX.Element | JSX.Element[]) => {\n    let pinInputFiledCounter = -1;\n    return React.Children.map(allChildren, (child: JSX.Element) => {\n      pinInputFiledCounter++;\n      return React.cloneElement(\n        child,\n        {\n          fieldIndex: pinInputFiledCounter,\n        },\n        child.props.children\n      );\n    });\n  };\n\n  React.useEffect(() => {\n    if (value !== undefined && value != pinInputValue) setPinInputValue(value);\n  }, [value, pinInputValue, setPinInputValue]);\n\n  return (\n    <PinInputContext.Provider\n      value={{\n        ...formControlContext,\n        ...newProps,\n        setRefList,\n        handleChange,\n        handleMultiValueChange,\n        value: pinInputValue,\n      }}\n    >\n      {children && (\n        <HStack flexDirection=\"row\" space={space} {...padding} ref={ref}>\n          {indexSetter(children)}\n        </HStack>\n      )}\n    </PinInputContext.Provider>\n  );\n};\n\nexport default React.memo(React.forwardRef(PinInput));\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}